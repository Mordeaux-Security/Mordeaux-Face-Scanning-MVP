# Database
POSTGRES_DB=mordeaux
POSTGRES_USER=mordeaux
POSTGRES_PASSWORD=mordeaux123

# S3/MinIO
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin123
S3_USE_SSL=false
S3_ENDPOINT=http://minio:9000
S3_PUBLIC_ENDPOINT=
S3_REGION=us-east-1
S3_BUCKET_RAW=raw-images
S3_BUCKET_THUMBS=thumbnails

# Vector Database
VECTOR_INDEX=faces

# Optional: Pinecone (leave empty for local development)
PINECONE_API_KEY=
PINECONE_INDEX=faces

# Frontend
VITE_API_BASE=/api

# Nginx
NGINX_MAX_BODY=50m

# Environment
ENVIRONMENT=development
LOG_LEVEL=info
ASGI_WORKERS=2

# Face Detection Configuration
FACE_MODEL_NAME=buffalo_l
FACE_DETECTION_SIZE_WIDTH=1024
FACE_DETECTION_SIZE_HEIGHT=1024
MIN_FACE_DETECTION_SCORE=0.6
MIN_FACE_QUALITY_SCORE=0.5
MIN_SIMILARITY_THRESHOLD=0.4
MIN_CONFIDENCE_THRESHOLD=0.4

# GPU Configuration - DirectML for AMD GPU
GPU_TYPE=directml
GPU_BACKEND=directml
ALL_GPU=false
FACE_DETECTION_GPU=true
FACE_EMBEDDING_GPU=true
IMAGE_PROCESSING_GPU=false
IMAGE_ENHANCEMENT_GPU=false
QUALITY_CHECKS_GPU=false
GPU_DEVICE_ID=0
GPU_MEMORY_LIMIT_GB=8
GPU_BATCH_SIZE=128

# GPU Worker Configuration
# For native Windows execution, use localhost:8765
# For Docker containers, override to host.docker.internal:8765 in docker-compose.yml
GPU_WORKER_ENABLED=true
GPU_WORKER_URL=http://localhost:8765
GPU_WORKER_TIMEOUT=30
GPU_WORKER_MAX_RETRIES=3

# DirectML Environment Variables (set automatically by ONNX Runtime)

# Dynamic Resource Management - AGGRESSIVE INTERVALS
ENABLE_DYNAMIC_RESOURCES=true
ADJUSTMENT_INTERVAL_S=0.3
TARGET_CPU_UTILIZATION=90.0
TARGET_GPU_UTILIZATION=92.0
TARGET_MEMORY_UTILIZATION=75.0

# Concurrency Bounds - HIGH THROUGHPUT
MIN_CONCURRENT_DOWNLOADS=20
MAX_CONCURRENT_DOWNLOADS=200
MIN_BATCH_SIZE=10
MAX_BATCH_SIZE=256
MIN_CONCURRENT_SITES=5
MAX_CONCURRENT_SITES=30

# Adjustment Behavior - MODERATE STEPS, FAST INTERVALS
AGGRESSIVE_SCALING=false
SMOOTHING_FACTOR=0.3
ADJUSTMENT_STEP_SIZE=5
ADJUSTMENT_STEP_SIZE_DECREMENT=2
ADJUSTMENT_STEP_PERCENT=10.0
ADJUSTMENT_STEP_PERCENT_DECREMENT=5.0
UTILIZATION_DEADBAND=3.0
WARMUP_PERIOD_S=5.0
MAX_ADJUSTMENT_PER_MINUTE=100

# Face Alignment
ENABLE_FACE_ALIGNMENT=true

# Model Ensemble
ENABLE_MODEL_ENSEMBLE=false
ENSEMBLE_MODELS=buffalo_l,buffalo_m,buffalo_s
ENSEMBLE_FUSION_STRATEGY=weighted_avg

# Vector Database Additional Settings
DEFAULT_SEARCH_TOPK=10
MAX_SEARCH_TOPK=100
QDRANT_URL=http://qdrant:6333

# Celery Configuration
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# GPU Worker Resource Management
GPU_WORKER_MEMORY_LIMIT_MB=2048
GPU_WORKER_CLEANUP_THRESHOLD=100
GPU_WORKER_WARMUP_INTERVAL=300
